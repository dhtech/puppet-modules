# AUTOGENERATED BY PUPPET
# All manual changes will be overwritten

# Core IPv4 hosts
<% if not @core_secret['key'].empty? -%>
<% @core_ips.each do |node, ipv4_addr| -%>
client <%= ipv4_addr %>/32 {
    ipaddr    = <%= ipv4_addr %>
    secret    = <%= @core_secret['key'] %>
    shortname = <%= node %>
}
<% end %>
<% end -%>

# Dist IPv4 hosts
<% if not @dist_secret['key'].empty? -%>
<% @dist_ips.each do |node, ipv4_addr| -%>
client <%= ipv4_addr %>/32 {
    ipaddr    = <%= ipv4_addr %>
    secret    = <%= @dist_secret['key'] %>
    shortname = <%= node %>
}
<% end %>
<% end -%>

# Access IPv4 hosts
<% if not @access_secret['key'].empty? -%>
<% @access_ips.each do |node, ipv4_addr| -%>
client <%= ipv4_addr %>/32 {
    ipaddr    = <%= ipv4_addr %>
    secret    = <%= @access_secret['key'] %>
    shortname = <%= ipv4_addr %>
}
<% end %>
<% end -%>

# Firewall IPv4 hosts
<% if not @firewall_secret['key'].empty? -%>
<% @firewall_ips.each do |node, ipv4_addr| -%>
client <%= ipv4_addr %>/32 {
    ipaddr    = <%= ipv4_addr %>
    secret    = <%= @firewall_secret['key'] %>
    shortname = <%= ipv4_addr %>
}
<% end %>
<% end -%>

# Partner IPv4 hosts
<% if not @partner_secret['key'].empty? -%>
<% @partner_ips.each do |node, ipv4_addr| -%>
client <%= ipv4_addr %>/32 {
    ipaddr    = <%= ipv4_addr %>
    secret    = <%= @partner_secret['key'] %>
    shortname = <%= ipv4_addr %>
}
<% end %>
<% end -%>

# Local test agent
client 127.0.0.1/32 {
    ipaddr    = 127.0.0.1
    secret    = test
    shortname = 127.0.0.1
}
