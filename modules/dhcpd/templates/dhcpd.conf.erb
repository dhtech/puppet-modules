# AUTOGENERATED BY PUPPET
# All manual changes will be overwritten
#
# Puppet generated configuration file
# See the dhcpd.conf(5) manpage for details

log-facility local7;

# Specify the subnet where the dhcpd lives, so we can start.
subnet <%= @local_subnet %> netmask <%= @local_netmask %> {}

# Specify some default times.
default-lease-time 7200;
max-lease-time 7200;

# We should issue DHCPNAK to misconfigured clients.
authoritative;

# The search domain used by clients.
option domain-name "event.dreamhack.se";

# The DNS resolvers used by clients
option domain-name-servers <%= @domain_name_servers %>;

# Option used by Cisco IP phones.
option tftp-server-name "<%= @tftp_server_name %>";

# DIRTY FIX FOR JUNIPER DHCP RELAY
always-broadcast true;

option ntp-servers <%= @ntp_servers %>;

## PXE STUFF
option client-arch code 93 = unsigned integer 16;
next-server <%= @next_server %>;
if exists user-class and option user-class = "iPXE" {
    filename "http://<%= @next_server %>/boot.cfg";
} elsif option client-arch = 00:07 {
    filename "ipxe.efi";
} else {
    filename "ipxe.pxe";
}

include "<%= @conf_dir %>/dhcpd.conf.scopes";

include "<%= @conf_dir %>/dhcpd.conf.local";

