# AUTOGENERATED BY PUPPET
# All manual changes will be overwritten

vault:
  url: 'https://vault.tech.dreamhack.se:1443'
redis:
  host: 'deploy-redis.tech.dreamhack.se'
  password: '<%= @redis_secret['password'['password']] %>'
  port: 1338
  ssl: True
esxi:
<% @esxi.each do |server| -%>
  - host: '<%= server['ip'] %>'
    domain: '<%= server['domain'] %>'
    fqdn: '<%= server['fqdn'] %>'
    username: '<%= scope.call_function('vault', ['login', server['fqdn']].join(':'))['username'] %>'
    password: '<%= scope.call_function('vault', ['login', server['fqdn']].join(':'))['password'] %>'
    deploy-vlan: 4095
<% end -%>
c7000:
<% @c7000.each do |server| -%>
  - host: '<%= server['ip'] %>'
    domain: '<%= server['domain'] %>'
    fqdn: '<%= server['fqdn'] %>'
    community: 'public'
    username: '<%= @c7000_secret['username'] %>'
    password: '<%= @c7000_secret['password'] %>'
<% end -%>
<% if @ocp == true -%>
ocp:
  - username: '<%= @ocp_ipmi['username'] %>'
    password: '<%= @ocp_ipmi['password'] %>'
    domain: '<%= @ocp_domain %>'
    machines:
<% @ocp_machines.each do |m| -%>
      <%= m['name'] %>:
        mac: '<%= m['macshort'] %>'
        mgmt-mac: '<%= m['mgmt-mac'] %>'
        ip: '<%= m['ip'] %>'
<% end -%>
<% end -%>
