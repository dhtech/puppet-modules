# AUTOGENERATED BY PUPPET
# All manual changes will be overwritten

default-lease-time 600;
max-lease-time 3600;

log-facility local7;
authoritative;

class "pxeclient" {
  match if substring (option vendor-class-identifier, 0, 9) = "PXEClient";
  if substring (option vendor-class-identifier, 15, 5) = "00000" {
    filename "ipxe.bin";
  } else {
    filename "ipxe.efi";
  }
}

# TODO ventris get this dynamically from ipplan
subnet 100.64.0.0 netmask 255.255.255.0 {
  pool {
    range 100.64.0.5 100.64.0.250;
    option routers 100.64.0.1;
    option domain-name-servers 8.8.8.8;
    next-server 100.64.0.1;
  }
}
subnet 100.64.1.0 netmask 255.255.255.0 {
  pool {
    range 100.64.1.5 100.64.1.250;
    option routers 100.64.1.1;
    option domain-name-servers 8.8.8.8;
    next-server 100.64.1.1;
  }
}
subnet 100.64.2.0 netmask 255.255.255.0 {
  pool {
    range 100.64.2.5 100.64.2.250;
    option routers 100.64.2.1;
    option domain-name-servers 8.8.8.8;
    next-server 100.64.2.1;
  }
}
subnet 10.32.12.0 netmask 255.255.255.0 {
  pool {
    range 10.32.12.5 10.32.12.250;
    option routers 10.32.12.1;
    option domain-name-servers 8.8.8.8;
    next-server 10.32.12.1;
  }
}

<% if @ocp == true -%>
#
# OCP SERVER LEASES
#
<% @ocp_machines.each do |m| %>
#Static lease for mgmt-<% m['name'] %>
host mgmt-<%= m['name'] %> {
  hardware ethernet <%= m['mgmt-mac'] %>;
  fixed-address <%= m['ip'] %>;
}
<% end %>
<% end %>
