# AUTOGENERATED BY PUPPET
# All manual changes will be overwritten

ServerTokens Minimal
ServerSignature Off
TraceEnable Off

<% if @ldap -%>
<AuthnProviderAlias ldap ldap-tech>
  AuthLDAPURL ldaps://<%= @ldap -%>/ou=people,dc=tech,dc=dreamhack,dc=se?uid?sub
  AuthLDAPGroupAttributeIsDN off
  AuthLDAPGroupAttribute memberUid
</AuthnProviderAlias>

<AuthnProviderAlias ldap ldap-crew>
  AuthLDAPURL ldaps://<%= @ldap -%>/ou=people,dc=crew,dc=dreamhack,dc=se?uid?sub
  AuthLDAPGroupAttributeIsDN off
  AuthLDAPGroupAttribute memberUid
</AuthnProviderAlias>

<Location />
  AuthType Basic
  AuthName "Dreamhack Tech Internal Services"

  AuthBasicProvider ldap-tech

  Require valid-user
</Location>

<Location /dhmap>
  AuthType Basic
  AuthName "Dreamhack Tech Internal Services"

  AuthBasicProvider ldap-tech ldap-crew

  Require valid-user
</Location>

<Location /analytics>
  AuthType Basic
  AuthName "Dreamhack Tech Internal Services"

  AuthBasicProvider ldap-tech ldap-crew

  Require valid-user
</Location>
<% end -%>
