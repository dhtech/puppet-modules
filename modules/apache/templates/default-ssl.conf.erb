# AUTOGENERATED BY PUPPET
# All manual changes will be overwritten

<IfModule mod_ssl.c>
  SSLStaplingCache "shmcb:logs/stapling-cache(150000)"

  <VirtualHost *:443>
    DocumentRoot /var/www/html
    ServerName <%= @fqdn %>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    # Modified from: https://cipherli.st/
    # Read more: https://raymii.org/s/tutorials/Strong_SSL_Security_On_Apache2.html
    Header always set Strict-Transport-Security "max-age=63072000; preload"
    Header always set X-Content-Type-Options nosniff

    SSLEngine On
    SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
    SSLProtocol All -SSLv2 -SSLv3
    SSLHonorCipherOrder On
    # Requires Apache >=2.4.11
    #SSLSessionTickets Off
    SSLCompression off
    SSLUseStapling on 
    SSLOptions +StrictRequire

    SSLCertificateFile /etc/ssl/certs/server-fullchain.crt
    SSLCertificateKeyFile /etc/ssl/private/server.key

    # Puppet modules dump proxy configuration in this directory
    IncludeOptional /etc/apache2/site.d/*.conf
  </VirtualHost>
</IfModule>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet

